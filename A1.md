# Вариант A1

### Задание 1 (10 баллов)
Существует клуб со следующими правилами включения членов клуба в профильные группы:  
a) члены финансового комитета должны избираться только среди членов дирекции клуба, и  
б) нельзя быть одновременно членом дирекции и членом библиотечного совета, не будучи членом финансового комитета, и  
в) член библиотечного совета не может быть членом финансового комитета  

С помощью формального анализа упростите эти правила. Сформулируйте новые правила на естественном языке.

---

#### Решение

**Шаг 1: Формализация переменных**

Введём логические переменные:
- D — член дирекции
- F — член финансового комитета  
- B — член библиотечного совета

**Шаг 2: Запись правил в виде формул**

a) F → D (если член финансового комитета, то член дирекции)

б) ¬(D ∧ B ∧ ¬F) (нельзя быть одновременно членом дирекции и библиотечного совета, не будучи членом финансового комитета)

в) B → ¬F (член библиотечного совета не может быть членом финансового комитета)

**Шаг 3: Упрощение формулы б**

¬(D ∧ B ∧ ¬F) ≡ ¬D ∨ ¬B ∨ F ≡ (D ∧ B) → F

**Шаг 4: Объединение правил б и в**

Из (в): B → ¬F, что эквивалентно F → ¬B

Из (б): (D ∧ B) → F

Подставим: если D ∧ B, то F, но из F следует ¬B. 
Значит: D ∧ B → F ∧ ¬B, что даёт противоречие (B ∧ ¬B = 0).

Следовательно: ¬(D ∧ B), т.е. **D → ¬B** или эквивалентно **B → ¬D**

**Шаг 5: Проверка совместимости с правилом а**

Из (а): F → D
Из (в): B → ¬F, эквивалентно F → ¬B

Объединяя: F → (D ∧ ¬B)

**Шаг 6: Итоговая система упрощённых правил**

1. **F → D** (член финансового комитета должен быть членом дирекции)
2. **B → ¬D** (член библиотечного совета не может быть членом дирекции)
3. **B → ¬F** (член библиотечного совета не может быть членом финансового комитета)

Правила 2 и 3 следуют друг из друга через правило 1 (если B → ¬D и F → D, то B → ¬F).

**Ответ на естественном языке:**

Упрощённые правила:
1. Члены финансового комитета должны быть членами дирекции.
2. Нельзя быть одновременно членом дирекции и членом библиотечного совета.

(Правило в) становится следствием этих двух правил.)

---

### Задание 2 (10 баллов)
Король объявил узнику, что в каждой из двух комнат находится либо принцесса, либо тигр, но может оказаться, что в обеих комнатах обнаружится по тигру или же там будут одни лишь принцессы. Для каждой из комнат приготовлены таблички. На одной из табличек написано: «В этой комнате сидит тигр». На другой: «В обеих комнатах сидят тигры». Дополнительная информация: если принцесса в первой комнате, то утверждение на табличке этой двери ложно, а если тигр, то истинно. Для второй комнаты все наоборот. Таблички только что изготовили и не успели повесить на двери, поэтому неизвестно, на какую дверь каждая из них будет повешена. С помощью формального анализа определите, в какой комнате находится принцесса.

---

#### Решение

**Шаг 1: Формализация переменных**

- P₁ = 1, если в комнате 1 принцесса; P₁ = 0, если тигр
- P₂ = 1, если в комнате 2 принцесса; P₂ = 0, если тигр

Таблички:
- T₁: «В этой комнате сидит тигр»
- T₂: «В обеих комнатах сидят тигры»

**Шаг 2: Правила истинности табличек**

Для комнаты 1: если принцесса (P₁=1), табличка ложна; если тигр (P₁=0), табличка истинна.
Для комнаты 2: если принцесса (P₂=1), табличка истинна; если тигр (P₂=0), табличка ложна.

**Шаг 3: Анализ варианта 1 — табличка T₁ на двери 1, T₂ на двери 2**

Табличка на двери 1: «В этой комнате (1) сидит тигр» = ¬P₁

Условие для комнаты 1:
- Если P₁=1 (принцесса), табличка должна быть ложной: ¬P₁ = 0 ✓
- Если P₁=0 (тигр), табличка должна быть истинной: ¬P₁ = 1 ✓

Это выполняется всегда — условие тавтология.

Табличка на двери 2: «В обеих комнатах сидят тигры» = ¬P₁ ∧ ¬P₂

Условие для комнаты 2:
- Если P₂=1, табличка истинна: ¬P₁ ∧ ¬P₂ = ¬P₁ ∧ 0 = 0 — противоречие!
- Если P₂=0, табличка ложна: ¬P₁ ∧ ¬P₂ = ¬P₁ ∧ 1 = ¬P₁ должно быть 0, значит P₁=1

При P₂=0, P₁=1: проверяем — табличка = 0 (ложь) ✓

**Вывод варианта 1:** P₁=1 (принцесса в комнате 1), P₂=0 (тигр в комнате 2)

**Шаг 4: Анализ варианта 2 — табличка T₂ на двери 1, T₁ на двери 2**

Табличка на двери 1: «В обеих комнатах сидят тигры» = ¬P₁ ∧ ¬P₂

Условие для комнаты 1:
- Если P₁=1: табличка ложна, ¬P₁ ∧ ¬P₂ = 0 ∧ ¬P₂ = 0 ✓ (при любом P₂)
- Если P₁=0: табличка истинна, ¬P₁ ∧ ¬P₂ = 1 ∧ ¬P₂ = ¬P₂ должно быть 1, значит P₂=0

Табличка на двери 2: «В этой комнате (2) сидит тигр» = ¬P₂

Условие для комнаты 2:
- Если P₂=1: табличка истинна, ¬P₂ = 0 — противоречие!
- Если P₂=0: табличка ложна, ¬P₂ = 1 — противоречие!

**Вывод варианта 2:** Противоречие, этот вариант невозможен.

**Ответ:** Принцесса находится в **комнате 1**, тигр — в комнате 2.

---

### Задание 3 (15 баллов)
На множестве всех пар вещественных чисел (на координатной плоскости) определите области истинности следующих предикатов:  
a) (x > 3y).  
b) (∀x)(x > 3y).  
c) (∃y)(x > 3y).  
d) (∀x)(∃y)(x > 3y).

---

#### Решение

**a) x > 3y**

Это открытый предикат от двух переменных.

**Шаг 1:** Преобразуем неравенство: x > 3y ⟺ y < x/3

**Шаг 2:** Область истинности — множество точек (x, y), лежащих строго ниже прямой y = x/3.

**Ответ:** Полуплоскость ниже прямой y = x/3 (не включая саму прямую).

---

**b) (∀x)(x > 3y)**

**Шаг 1:** Это предикат от y. Утверждение: «для всех x выполняется x > 3y».

**Шаг 2:** Неравенство x > 3y должно выполняться для ВСЕХ x ∈ ℝ.

**Шаг 3:** Но для любого фиксированного y можно найти x = 3y - 1, тогда x = 3y - 1 < 3y.

**Шаг 4:** Значит, не существует такого y, при котором x > 3y выполнялось бы для всех x.

**Ответ:** Область истинности — **пустое множество ∅**.

---

**c) (∃y)(x > 3y)**

**Шаг 1:** Это предикат от x. Утверждение: «существует y такой, что x > 3y».

**Шаг 2:** Для любого фиксированного x ∈ ℝ нужно найти y такой, что y < x/3.

**Шаг 3:** Такой y всегда существует (например, y = x/3 - 1).

**Ответ:** Область истинности — **вся вещественная прямая ℝ** (все x).

---

**d) (∀x)(∃y)(x > 3y)**

**Шаг 1:** Это замкнутая формула (нет свободных переменных). Утверждение: «для любого x существует y такой, что x > 3y».

**Шаг 2:** Для любого x возьмём y = x/3 - 1, тогда x > 3(x/3 - 1) = x - 3, что верно.

**Шаг 3:** Формула истинна.

**Ответ:** Формула **истинна** (тождественно истинна на ℝ).

---

### Задание 4 (10 баллов)
Для приведенных ниже двух фрагментов программ S проверьте их корректность по отношению к предусловию I и постусловию R построением слабейшего предусловия wp:

| Предусловия I            | Фрагменты программы S   | Постусловия R               |
|--------------------------|-------------------------|-----------------------------|
| {z > b - a}              | a := a + 1; b := b - 1;   | {z + a - b > 3}             |
| {i ≥ 0 & s = ∑_{0≤j≤i} b[j]} | i := i + 1; s := b[i]; | {i > 0 & s = ∑_{0≤j≤i} b[j]} |

---

#### Решение

**Задача 1: {z > b - a} a := a + 1; b := b - 1; {z + a - b > 3}**

**Шаг 1:** Вычисляем wp для последовательности операторов справа налево.

**Шаг 2:** wp("b := b - 1", z + a - b > 3)
- Подставляем b - 1 вместо b: z + a - (b - 1) > 3
- Получаем: z + a - b + 1 > 3, т.е. **z + a - b > 2**

**Шаг 3:** wp("a := a + 1", z + a - b > 2)
- Подставляем a + 1 вместо a: z + (a + 1) - b > 2
- Получаем: z + a + 1 - b > 2, т.е. **z + a - b > 1**, или **z > b - a + 1**

**Шаг 4:** Проверка: I → wp(S, R)?
- I: z > b - a
- wp: z > b - a + 1

Нужно проверить: (z > b - a) → (z > b - a + 1)?

Это **НЕ ВЕРНО**: если z = b - a + 0.5, то z > b - a (истина), но z > b - a + 1 (ложь).

**Ответ 1:** Программа **некорректна**. Контрпример: a = 0, b = 0, z = 0.5.

---

**Задача 2: {i ≥ 0 & s = ∑_{0≤j≤i} b[j]} i := i + 1; s := b[i]; {i > 0 & s = ∑_{0≤j≤i} b[j]}**

**Шаг 1:** wp("s := b[i]", i > 0 ∧ s = ∑_{0≤j≤i} b[j])
- Подставляем b[i] вместо s: i > 0 ∧ b[i] = ∑_{0≤j≤i} b[j]
- Получаем: **i > 0 ∧ b[i] = ∑_{0≤j≤i} b[j]**

**Шаг 2:** wp("i := i + 1", i > 0 ∧ b[i] = ∑_{0≤j≤i} b[j])
- Подставляем i + 1 вместо i:
- (i + 1) > 0 ∧ b[i + 1] = ∑_{0≤j≤i+1} b[j]
- Получаем: **i ≥ 0 ∧ b[i + 1] = ∑_{0≤j≤i+1} b[j]**

**Шаг 3:** Проверка: I → wp(S, R)?
- I: i ≥ 0 ∧ s = ∑_{0≤j≤i} b[j]
- wp: i ≥ 0 ∧ b[i + 1] = ∑_{0≤j≤i+1} b[j]

Условие i ≥ 0 следует из I.

Нужно проверить: b[i + 1] = ∑_{0≤j≤i+1} b[j]?

Это неверно в общем случае: ∑_{0≤j≤i+1} b[j] = ∑_{0≤j≤i} b[j] + b[i+1] = s + b[i+1] ≠ b[i+1] (если s ≠ 0).

**Ответ 2:** Программа **некорректна**. Ошибка: должно быть `s := s + b[i]` вместо `s := b[i]`.

---

### Задание 5 (15 баллов)
Выразите формулой темпоральной логики линейного времени LTL следующие свойства бесконечных вычислений, считая, что в каждом состоянии выполняется не более одного события:  
a) Если произойдет событие p, то после этого событие q не произойдет уже никогда.  
b) Событие p встречается по меньшей мере парами, т.е. если p истинно в состоянии s_k, то p истинно в s_{k+1} и в s_{k-1}.  
c) Если когда-нибудь встретится p, то обязательно в будущем выполнится q до того, как p снова выполнится. При этом события p и q не выполняются одновременно.

---

#### Решение

**a) Если произойдет событие p, то после этого событие q не произойдет уже никогда.**

**Шаг 1:** Формализуем: если в какой-то момент p, то начиная со следующего момента q никогда не выполнится.

**Шаг 2:** «После p никогда не q» означает: G(¬q) начиная с момента после p.

**Шаг 3:** Формула: **G(p → X G ¬q)**

Альтернативная запись: **G(p → G ¬q)** (включая текущий момент, если p и q не могут быть одновременно)

---

**b) Событие p встречается по меньшей мере парами: если p в s_k, то p в s_{k+1} и s_{k-1}.**

**Шаг 1:** Условие p → X p гарантирует: если p, то в следующем состоянии тоже p.

**Шаг 2:** Условие p → «p было в предыдущем» — в LTL нет оператора «прошлое», но можно записать через свойство: X p → p (если в следующем p, то и сейчас p).

**Шаг 3:** Объединяя: (p → X p) ∧ (X p → p), что эквивалентно p ↔ X p.

**Шаг 4:** Формула: **G(p ↔ X p)**

Это означает: p всегда эквивалентно X p, т.е. p либо выполняется всегда, либо никогда не выполняется (блоками бесконечной длины).

**Примечание:** Если требуется конечные блоки парами, формулировка задачи требует уточнения. Стандартная интерпретация «парами» — **G((p ∧ ¬X p) → false)** = **G(p → X p)**, но для «предыдущего» в чистом LTL: **G(X p → p) ∧ G(p → X p)** = **G(p ↔ X p)**.

---

**c) Если когда-нибудь встретится p, то обязательно в будущем выполнится q до того, как p снова выполнится.**

**Шаг 1:** После каждого p должно быть q прежде, чем снова появится p.

**Шаг 2:** Используем оператор Until: после p, ¬p держится, пока не наступит q.

**Шаг 3:** Формула: **G(p → X(¬p U q))**

Это означает: всегда, когда p, в следующий момент начинается период без p, который длится до появления q.

---

### Задание 6 (10 баллов)
Пусть M = (S, S₀, R, AP, L) – такая структура Крипке:  
S = {S₀, S₁, S₂, S₃}  
S₀ = {S₀}  
R = {(S₀, S₁), (S₀, S₃), (S₁, S₁), (S₁, S₂), (S₂, S₀), (S₂, S₃), (S₃, S₀)}  
AP = {a, b, c}  
L(S₀) = {a}, L(S₁) = {c}, L(S₂) = {b}, L(S₃) = {b, c}  

В каких состояниях M выполняется формула CTL: AG(EF b)?

---

#### Решение

**Шаг 1: Понимание формулы AG(EF b)**

- EF b означает: существует путь, на котором когда-нибудь выполнится b.
- AG(EF b) означает: на всех путях, во всех состояниях выполняется EF b.
- Т.е. из любого достижимого состояния можно добраться до состояния с b.

**Шаг 2: Построение графа переходов**

```
    ┌───────────────────────────────────────────────┐
    │                                               │
    │      ┌──────────────────────────────────────┐ │
    │      │                                      │ │
    ▼      ▼                                      │ │
┌─────────┐      ┌─────────┐      ┌─────────┐     │ │
│   S₀    │─────►│   S₁    │─────►│   S₂    │─────┘ │
│  L={a}  │      │  L={c}  │◄────►│  L={b}  │       │
└─────────┘      └─────────┘      └─────────┘       │
    │               ▲ │               │             │
    │               └─┘               │             │
    │              (петля)            ▼             │
    │                            ┌─────────┐       │
    └───────────────────────────►│   S₃    │───────┘
                                 │ L={b,c} │
                                 └─────────┘
```

Переходы:
- S₀ → S₁, S₀ → S₃
- S₁ → S₁ (петля), S₁ → S₂
- S₂ → S₀, S₂ → S₃
- S₃ → S₀

**Шаг 3: Определение состояний, где b истинно**

- L(S₂) = {b} — b истинно
- L(S₃) = {b, c} — b истинно
- L(S₀) = {a} — b ложно
- L(S₁) = {c} — b ложно

**Шаг 4: Вычисление EF b для каждого состояния**

EF b = μZ. (b ∨ EX Z)

Итерация:
- Z₀ = ∅
- Z₁ = {S₂, S₃} (состояния где b истинно)
- Z₂ = {S₂, S₃} ∪ EX{S₂, S₃} = {S₂, S₃} ∪ {S₀, S₁, S₂} = {S₀, S₁, S₂, S₃}
- Z₃ = {S₀, S₁, S₂, S₃} — неподвижная точка

**EF b выполняется во всех состояниях: {S₀, S₁, S₂, S₃}**

**Шаг 5: Проверка AG(EF b)**

AG(EF b) выполняется в s, если на всех путях из s, во всех состояниях выполняется EF b.

Поскольку EF b выполняется во всех состояниях {S₀, S₁, S₂, S₃}, то AG(EF b) выполняется везде.

**Проверка достижимости всех состояний:**
- Из S₀: достижимы S₁, S₃, S₂ (через S₁), S₀ (через S₂ или S₃)
- Все состояния достижимы из S₀.

**Ответ:** Формула AG(EF b) выполняется во **всех состояниях: S₀, S₁, S₂, S₃**.