# Вариант Г4

### Задание 1 (10 баллов)
Булева функция ite(x,y,z) = if x then y else z. Составляет ли множество M = {ite, 0, -} полную систему функций? Можно ли конъюнкцию, дизъюнкцию и отрицание, импликацию, сложение по модулю 2 выразить через функции M?

---

#### Решение

**Шаг 1: Определение ite**

ite(x, y, z) = (x ∧ y) ∨ (¬x ∧ z) = "если x, то y, иначе z"

**Шаг 2: Проверка на полноту системы {ite, 0, ¬}**

Для полноты достаточно выразить все функции из какого-либо базиса (например, {∧, ∨, ¬} или {¬, ∧}).

**Выражение отрицания:** Дано ¬ (обозначено как "-").
- ¬x = ¬x ✓

**Выражение конъюнкции:**
- x ∧ y = ite(x, y, 0) = (x ∧ y) ∨ (¬x ∧ 0) = x ∧ y ✓

**Выражение дизъюнкции:**
- x ∨ y = ite(x, 1, y), но 1 нет в M.
- Альтернатива: x ∨ y = ¬(¬x ∧ ¬y) = ¬(ite(¬x, ¬y, 0))
- Или: x ∨ y = ite(x, x, y) = (x ∧ x) ∨ (¬x ∧ y) = x ∨ (¬x ∧ y) = x ∨ y ✓
- Проверка: ite(x, x, y) = (x → x) ∧ (¬x → y)? Нет, это ite.
- ite(x, x, y) = x·x + ¬x·y = x + ¬x·y = x ∨ y ✓

**Вывод:** Система **{ite, 0, ¬} полна**.

**Шаг 3: Выражение функций**

**Конъюнкция:** x ∧ y = **ite(x, y, 0)**

**Дизъюнкция:** x ∨ y = **ite(x, x, y)** или **ite(¬x, y, x)** или **¬ite(x, 0, ¬y)**

Проверим ite(x, x, y): 
- x=1: ite(1,1,y) = 1 ✓
- x=0: ite(0,0,y) = y ✓
Это x ∨ y ✓

**Отрицание:** ¬x = **¬x** (дано)

**Импликация:** x → y = ¬x ∨ y = **ite(x, y, ¬0)** 

Но ¬0 = 1. Можно записать: x → y = ite(x, y, ¬0) = ite(x, y, 1)

Альтернатива без 1: x → y = ¬(x ∧ ¬y) = **¬ite(x, ¬y, 0)**

**Сложение по модулю 2 (XOR):** x ⊕ y = (x ∧ ¬y) ∨ (¬x ∧ y)
- x ⊕ y = ite(x, ¬y, y) ✓

Проверка ite(x, ¬y, y):
- x=1: ¬y
- x=0: y
Это действительно XOR ✓

**Ответ:**
- Система M = {ite, 0, ¬} **является полной**.
- ∧ = ite(x, y, 0)
- ∨ = ite(x, x, y)
- ¬ = ¬ (дано)
- → = ¬ite(x, ¬y, 0)
- ⊕ = ite(x, ¬y, y)

---

### Задание 2 (15 баллов)
Проверьте правильность умозаключения методом резолюций:  
"Известно, что Сергей не младше Боба. Если Боб и Сергей одного возраста, то Ната и Боб не одного возраста, а если Сергей старше Боба, то Боб старше Виктора".  
Следовательно, или Ната и Боб не одного возраста, или же Боб старше Виктора.

---

#### Решение

**Шаг 1: Формализация**

Пусть:
- E = "Боб и Сергей одного возраста"
- O = "Сергей старше Боба"
- N = "Ната и Боб одного возраста"
- V = "Боб старше Виктора"

Посылки:
1. Сергей не младше Боба: E ∨ O (либо одного возраста, либо Сергей старше)
2. E → ¬N (если одного возраста, то Ната и Боб НЕ одного возраста)
3. O → V (если Сергей старше, то Боб старше Виктора)

Заключение: ¬N ∨ V

**Шаг 2: Преобразование в КНФ**

(1) E ∨ O
(2) E → ¬N ≡ ¬E ∨ ¬N
(3) O → V ≡ ¬O ∨ V

Отрицание заключения: ¬(¬N ∨ V) = N ∧ ¬V
(4) N
(5) ¬V

**Шаг 3: Метод резолюций**

(6) Из (2) и (4): ¬E  [резольвента ¬E ∨ ¬N и N]

(7) Из (1) и (6): O  [резольвента E ∨ O и ¬E]

(8) Из (3) и (7): V  [резольвента ¬O ∨ V и O]

(9) Из (8) и (5): □  [резольвента V и ¬V — пустой дизъюнкт]

**Ответ:** Умозаключение **правильно**. Доказано методом резолюций.

---

### Задание 3 (15 баллов)
На множестве M = {1, 2, ..., 10} целых чисел определены атомарные предикаты:  
A(x): число x делится на 3.  
B(x): число x делится на 4.  
C(x): число x простое.  
D(x): число четное.  
E(x): x^2 - 3x - 10 = 0.  
Определите подмножества M, на которых истинны следующие открытые предикаты:  
a) A(x) ∧ B(x).  
b) B(x) ⇒ D(x).  
c) C(x) ⇒ D(x).  
d) D(x) ∨ A(x) ⇒ B(x).  
e) E(x) ⇒ D(x).

---

#### Решение

**Шаг 1: Определение истинности базовых предикатов на M**

| x | A(x) (÷3) | B(x) (÷4) | C(x) (простое) | D(x) (чётное) | E(x) (x²-3x-10=0) |
|---|-----------|-----------|----------------|---------------|-------------------|
| 1 | 0 | 0 | 0 | 0 | 1-3-10=-12≠0, 0 |
| 2 | 0 | 0 | 1 | 1 | 4-6-10=-12≠0, 0 |
| 3 | 1 | 0 | 1 | 0 | 9-9-10=-10≠0, 0 |
| 4 | 0 | 1 | 0 | 1 | 16-12-10=-6≠0, 0 |
| 5 | 0 | 0 | 1 | 0 | 25-15-10=0, **1** |
| 6 | 1 | 0 | 0 | 1 | 36-18-10=8≠0, 0 |
| 7 | 0 | 0 | 1 | 0 | 49-21-10=18≠0, 0 |
| 8 | 0 | 1 | 0 | 1 | 64-24-10=30≠0, 0 |
| 9 | 1 | 0 | 0 | 0 | 81-27-10=44≠0, 0 |
| 10 | 0 | 0 | 0 | 1 | 100-30-10=60≠0, 0 |

Итого:
- A(x) = {3, 6, 9}
- B(x) = {4, 8}
- C(x) = {2, 3, 5, 7}
- D(x) = {2, 4, 6, 8, 10}
- E(x) = {5} (решение x²-3x-10=0: x=(3±√49)/2=(3±7)/2, x=5 или x=-2; -2∉M)

**Шаг 2: Вычисление предикатов**

**a) A(x) ∧ B(x)**

Делится на 3 И на 4 = делится на 12.

A ∩ B = {3,6,9} ∩ {4,8} = **∅**

**b) B(x) ⇒ D(x)**

B → D ≡ ¬B ∨ D

¬B = {1,2,3,5,6,7,9,10}
D = {2,4,6,8,10}
¬B ∪ D = **{1,2,3,4,5,6,7,8,9,10} = M**

(Все числа, делящиеся на 4, чётные — импликация всегда истинна)

**c) C(x) ⇒ D(x)**

C → D ≡ ¬C ∨ D

¬C = {1,4,6,8,9,10}
D = {2,4,6,8,10}
¬C ∪ D = {1,2,4,6,8,9,10}

Не входят: 3, 5, 7 (простые нечётные)

**Ответ: {1, 2, 4, 6, 8, 9, 10}**

**d) (D(x) ∨ A(x)) ⇒ B(x)**

(D ∨ A) → B ≡ ¬(D ∨ A) ∨ B ≡ (¬D ∧ ¬A) ∨ B

D ∨ A = {2,3,4,6,8,9,10}
¬(D ∨ A) = {1,5,7}
B = {4,8}
¬(D ∨ A) ∪ B = {1,4,5,7,8}

**Ответ: {1, 4, 5, 7, 8}**

**e) E(x) ⇒ D(x)**

E → D ≡ ¬E ∨ D

E = {5}
¬E = {1,2,3,4,6,7,8,9,10}
D = {2,4,6,8,10}
¬E ∪ D = {1,2,3,4,6,7,8,9,10}

Не входит: 5 (E(5)=1, но D(5)=0)

**Ответ: {1, 2, 3, 4, 6, 7, 8, 9, 10}**

---

### Задание 4 (5 баллов)
Проверьте корректность программы методом Флойда:  
{X = a ∧ Y = b}  
X := Y - X;  
Y := Y - X;  
X := X + Y;  
{X = b ∧ Y = a}

---

#### Решение

**Метод:** Вычисление слабейшего предусловия (wp) справа налево.

**Шаг 1:** wp("X := X + Y", X = b ∧ Y = a)
- Подставляем X + Y вместо X: (X + Y) = b ∧ Y = a
- Получаем: X + Y = b ∧ Y = a, т.е. **X = b - a ∧ Y = a**

**Шаг 2:** wp("Y := Y - X", X = b - a ∧ Y = a)
- Подставляем Y - X вместо Y: X = b - a ∧ (Y - X) = a
- Получаем: X = b - a ∧ Y = a + X = a + (b - a) = b
- Итого: **X = b - a ∧ Y = b**

**Шаг 3:** wp("X := Y - X", X = b - a ∧ Y = b)
- Подставляем Y - X вместо X: (Y - X) = b - a ∧ Y = b
- Из Y = b: b - X = b - a, значит X = a
- Итого: **X = a ∧ Y = b**

**Шаг 4:** Проверка: I → wp?
- I: X = a ∧ Y = b
- wp: X = a ∧ Y = b

I ≡ wp ✓

**Ответ:** Программа **корректна**. Она выполняет обмен значений X и Y.

---

### Задание 5 (10 баллов)
Покажите, что две LTL формулы следующих пар не эквивалентны, построив вычисление, удовлетворяющее одной из формул, и не удовлетворяющее другой:  
a) G(p ⇒ X p) и F p ∧ G(p ⇒ X p)  
b) F(p ∧ q) и F p ∧ F q

---

#### Решение

**a) G(p → Xp) и Fp ∧ G(p → Xp)**

**Вычисление σ₁:** ∅, ∅, ∅, ... (p никогда не истинно)

- G(p → Xp): p всегда ложно, поэтому p → Xp всегда истинно (ложная посылка). **Истинно** ✓
- Fp ∧ G(p → Xp): Fp требует, чтобы p когда-нибудь было истинно. p никогда не истинно. **Ложно** ✗

**Вывод:** σ₁ удовлетворяет G(p → Xp), но не удовлетворяет Fp ∧ G(p → Xp).

**Формулы НЕ эквивалентны.**

---

**b) F(p ∧ q) и Fp ∧ Fq**

**Вычисление σ₂:** {p}, {q}, ∅, ∅, ... 

Позиция 0: p истинно, q ложно
Позиция 1: p ложно, q истинно
Далее: p и q ложны

- Fp ∧ Fq: Fp истинно (p в позиции 0), Fq истинно (q в позиции 1). **Истинно** ✓
- F(p ∧ q): Нужен момент, когда p ∧ q истинно. В позиции 0: p∧q = 1∧0 = 0. В позиции 1: p∧q = 0∧1 = 0. Далее: 0∧0 = 0. **Ложно** ✗

**Вывод:** σ₂ удовлетворяет Fp ∧ Fq, но не удовлетворяет F(p ∧ q).

**Формулы НЕ эквивалентны.**

---

### Задание 6 (15 баллов)
Пусть M = (S, S_0, R, AP, L) — такая структура Крипке:  
S = {s_0, s_1, s_2, s_3}, S_0 = {s_0}, R = {(s_0, s_1), (s_2, s_0), (s_0, s_2), (s_2, s_3), (s_3, s_0)}  
при некотором множестве атомарных предикатов и функции пометок L. Известно, что формула EF φ выполняется в состоянии s_3. Будет ли EF φ выполняться в s_0? В s_1? В s_2? В M?

---

#### Решение

**Шаг 1: Построение графа переходов**

```
              ┌─────────────────────────────────┐
              │                                 │
              ▼                                 │
         ┌─────────┐      ┌─────────┐           │
    ┌───►│   s₀    │─────►│   s₁    │ (тупик)   │
    │    └─────────┘      └─────────┘           │
    │         │                                 │
    │         │                                 │
    │         ▼                                 │
    │    ┌─────────┐      ┌─────────┐           │
    │    │   s₂    │─────►│   s₃    │───────────┘
    │    └─────────┘      └─────────┘
    │         │
    └─────────┘
```

Переходы:
- s₀ → s₁
- s₀ → s₂
- s₂ → s₀
- s₂ → s₃
- s₃ → s₀

Обратите внимание: из s₁ нет переходов (тупиковое состояние).

**Шаг 2: Анализ EF φ**

EF φ означает: существует путь, на котором когда-нибудь выполнится φ.

Дано: EF φ выполняется в s₃, значит из s₃ можно достичь состояния, где φ истинно.

**Шаг 3: Достижимость из каждого состояния**

- Из s₃: достижимы s₀ (прямо), s₁ (через s₀), s₂ (через s₀), s₃ (через s₀→s₂)
- Из s₀: достижимы s₁, s₂, s₃ (через s₂), s₀ (через s₂ или s₃)
- Из s₂: достижимы s₀, s₃, s₁ (через s₀), s₂ (через s₀)
- Из s₁: только s₁ (тупик, нет исходящих рёбер)

**Шаг 4: Ответы на вопросы**

**EF φ в s₀?**

Из s₀ достижимо s₃ (путь s₀ → s₂ → s₃). Поскольку EF φ истинно в s₃, и s₃ достижимо из s₀, то EF φ истинно в s₀.

**Ответ: ДА**

**EF φ в s₁?**

Из s₁ нет исходящих переходов. s₁ — тупиковое состояние.

EF φ в s₁ истинно только если φ истинно в s₁ (поскольку других состояний из s₁ не достичь).

Мы не знаем, истинно ли φ в s₁. Но мы знаем, что EF φ истинно в s₃.

Если φ истинно в каком-то состоянии, достижимом из s₃, то это может быть любое из {s₀, s₁, s₂, s₃}.

**Если φ истинно в s₁:** тогда EF φ в s₁ истинно.
**Если φ не истинно в s₁:** тогда EF φ в s₁ ложно (из s₁ ничего не достижимо).

**Ответ: Неизвестно** (зависит от того, где именно истинно φ)

**EF φ в s₂?**

Из s₂ достижимо s₃. Поскольку EF φ истинно в s₃, и s₃ достижимо из s₂, то EF φ истинно в s₂.

**Ответ: ДА**

**EF φ в M?**

M ⊨ EF φ означает: EF φ истинно во всех начальных состояниях.

S₀ = {s₀}, и EF φ истинно в s₀.

**Ответ: ДА**

---

**Итоговые ответы:**
- s₀: **ДА**
- s₁: **Неизвестно** (зависит от φ)
- s₂: **ДА**
- M: **ДА**