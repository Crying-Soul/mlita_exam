# Вариант K10

(Σ 70 баллов)

### Задание 1 (15 баллов)
Подсчитайте число:

a) всех монотонных двоичных функций от двух переменных;

b) всех двоичных функций от четырёх переменных, не сохраняющих 1 (т.е. f(1,1,1,1)=0);

c) всех нелинейных двоичных функций от пяти переменных;

d) всех самодвойственных двоичных функций от шести переменных.

---

#### Решение

**a) Монотонные функции от 2 переменных**

Функция монотонна, если при увеличении аргументов значение не уменьшается.

Для 2 переменных есть 4 набора, упорядоченных: 00 ≤ 01, 10 ≤ 11, 00 ≤ 10, 00 ≤ 01 ≤ 11, 00 ≤ 10 ≤ 11.

Решётка:
```
    11
   /  \
  01  10
   \  /
    00
```

Монотонная функция — антицепь в решётке значений. Используем формулу Дедекинда.

Для n=2: число монотонных функций = **6**

Перечислим: 0, x∧y, x, y, x∨y, 1.

---

**b) Функции от 4 переменных, не сохраняющие 1**

Всего функций от 4 переменных: 2^(2^4) = 2^16 = 65536

Функция не сохраняет 1, если f(1,1,1,1) = 0.

Это фиксирует одно значение, остальные 15 значений свободны.

Число таких функций: 2^15 = **32768**

---

**c) Нелинейные функции от 5 переменных**

Линейная функция: f = a₀ ⊕ a₁x₁ ⊕ a₂x₂ ⊕ a₃x₃ ⊕ a₄x₄ ⊕ a₅x₅

Коэффициентов: 6 (включая a₀).
Число линейных функций: 2^6 = 64

Всего функций от 5 переменных: 2^(2^5) = 2^32

Число нелинейных: 2^32 - 64 = **4294967232**

---

**d) Самодвойственные функции от 6 переменных**

Функция самодвойственна, если f(x₁,...,xₙ) = ¬f(¬x₁,...,¬xₙ).

Для n=6 есть 2^6 = 64 набора. Они разбиваются на 32 пары противоположных наборов.

Значение на одном наборе пары определяет значение на противоположном.

Число самодвойственных функций: 2^32 = **4294967296**

---

### Задание 2 (10 баллов)
Справедливо ли заключение S(A) для следующей базы знаний:

F1: ∀x (P(x)) Q(x)

F2: ∀u (¬R(u)) P(u)

F3: ∀z (Q(z)) ¬S(z)

F4: ∀y (R(y)) S(y)

---

#### Решение

**Интерпретация формул:**

F1: ∀x (P(x) → Q(x))
F2: ∀u (¬R(u) → P(u))
F3: ∀z (Q(z) → ¬S(z))
F4: ∀y (R(y) → S(y))

**Вопрос:** Следует ли S(A) (является ли S(A) логическим следствием)?

**Метод резолюций:**

Переведём в клаузальную форму (для константы A):

1. ¬P(A) ∨ Q(A)
2. R(A) ∨ P(A)
3. ¬Q(A) ∨ ¬S(A)
4. ¬R(A) ∨ S(A)

Добавим отрицание цели: **¬S(A)**.

**Попытка вывода (поиск противоречия):**

5. Из 4 и ¬S(A): ¬R(A)
6. Из 2 и 5: P(A)
7. Из 1 и 6: Q(A)
8. Из 3 и 7: ¬S(A)

Мы вывели ¬S(A), что совпадает с добавленным отрицанием цели. Противоречия (пустого дизъюнкта) не получено. Значит, **S(A) не следует логически**.

**Проверка логического следствия для ¬S(A):**

Попробуем проверить, следует ли ¬S(A). Для этого добавим отрицание ¬S(A), т.е. **S(A)**, к посылкам.

5'. Из 3 и S(A): ¬Q(A)
6'. Из 1 и 5': ¬P(A)
7'. Из 2 и 6': R(A)
8'. Из 4 и 7': S(A)

Снова получили утверждение, совпадающее с предположением. Противоречия нет.

**Анализ моделей:**

Система посылок допускает различные модели относительно A:
*   **Модель 1 (где S ложно):** Пусть $S(A)=0, R(A)=0, P(A)=1, Q(A)=1$.
    *   F4: $1 \lor 0 = 1$ (ok)
    *   F3: $\neg 1 \lor 1 = 1$ (ok)
    *   F2: $0 \lor 1 = 1$ (ok)
    *   F1: $\neg 1 \lor 1 = 1$ (ok)
    *   Все посылки истинны, $S(A)$ ложно.
*   **Модель 2 (где S истинно):** Пусть $S(A)=1, R(A)=1, P(A)=0, Q(A)=0$.
    *   F4: $0 \lor 1 = 1$ (ok)
    *   F3: $1 \lor 0 = 1$ (ok)
    *   F2: $1 \lor 0 = 1$ (ok)
    *   F1: $1 \lor 0 = 1$ (ok)
    *   Все посылки истинны, $S(A)$ истинно.

**Ответ:** S(A) **не следует** из базы знаний (как и ¬S(A)). Утверждение о S(A) **не справедливо** (не является тавтологией вывода).

---

### Задание 3 (15 баллов)
Проверьте правильность следующего рассуждения:

"Падение авторитета власти приводит к тому, что нарастает анархия в обществе. Но, как известно, нарастание анархии в обществе ведет к появлению на политической арене безответственных политиков. Известно, что подобные политики всегда высказывают абсурдные идеи. Высказывание политиками абсурдных идей демонстрирует их неспособность управлять страной. Следовательно, падение авторитета власти приводит к появлению политиков, которые не способны управлять страной."

Проведите логическую проверку корректности цепочки рассуждений (обоснуйте, можно ли сделать такой вывод).

---

#### Решение

**Введём обозначения:**
- P — падение авторитета власти
- A — нарастание анархии в обществе
- B — появление безответственных политиков
- I — высказывание абсурдных идей
- N — неспособность управлять страной

**Формализация посылок:**

1. P → A (падение авторитета → анархия)
2. A → B (анархия → безответственные политики)
3. B → I (безответственные политики → абсурдные идеи)
4. I → N (абсурдные идеи → неспособность управлять)

**Заключение для проверки:** P → N

**Доказательство:**

Построим цепочку импликаций:

P → A (посылка 1)
A → B (посылка 2)
B → I (посылка 3)
I → N (посылка 4)

По транзитивности импликации:
- P → A → B (из 1 и 2)
- P → B → I (добавляем 3)
- P → I → N (добавляем 4)

Итого: P → N

**Формальное доказательство:**

Если P истинно:
1. P → A, значит A истинно
2. A → B, значит B истинно
3. B → I, значит I истинно
4. I → N, значит N истинно

Следовательно, P → N.

**Ответ:** Рассуждение **логически корректно**. Вывод P → N следует из посылок по правилу транзитивности импликации (цепное правило, hypothetical syllogism).

---

### Задание 4 (5 баллов)
Проверьте корректность следующей ациклической программы:

{ x + y > z }
begin
    z := x + y + z;
    y := z - 5*y;
end
{ z + 3*y ≤ 2*x }

Если спецификация неверна, приведите контрпример.

---

#### Решение

**Используем метод wp (слабейшего предусловия).**

Программа: z := x + y + z; y := z - 5*y
Постусловие: z + 3y ≤ 2x

**Шаг 1:** wp("y := z - 5*y", z + 3y ≤ 2x)

Подставляем z - 5y вместо y:
z + 3(z - 5y) ≤ 2x
z + 3z - 15y ≤ 2x
4z - 15y ≤ 2x

**Шаг 2:** wp("z := x + y + z", 4z - 15y ≤ 2x)

Подставляем x + y + z вместо z:
4(x + y + z) - 15y ≤ 2x
4x + 4y + 4z - 15y ≤ 2x
4x - 11y + 4z ≤ 2x
2x - 11y + 4z ≤ 0
2x + 4z ≤ 11y

**wp программы:** 2x + 4z ≤ 11y

**Шаг 3: Проверяем импликацию**

(x + y > z) → (2x + 4z ≤ 11y)?

**Контрпример:**
Пусть x = 10, y = 1, z = 0.

Предусловие: 10 + 1 > 0 → 11 > 0 ✓

Проверим wp: 2(10) + 4(0) ≤ 11(1) → 20 ≤ 11? **Нет!**

**Проверка выполнением:**
- Начало: x = 10, y = 1, z = 0
- z := x + y + z = 10 + 1 + 0 = 11
- y := z - 5y = 11 - 5(1) = 6
- Постусловие: z + 3y ≤ 2x → 11 + 18 ≤ 20 → 29 ≤ 20? **Нет!**

**Ответ:** Спецификация **неверна**.

**Контрпример:** x = 10, y = 1, z = 0.

---

### Задание 5 (15 баллов)
Выразите формулой темпоральной логики линейного времени LTL следующие свойства бесконечных вычислений (считайте, что в каждом состоянии выполняется не более одного события):

a) Если событие p наступит по крайней мере дважды, то оно будет наступать бесконечное число раз.

б) Между состояниями, в которых p выполняется, есть по крайней мере три состояния, в которых p не выполняется.

в) Событие p выполняется в состояниях s_k при k = 0,1,2,... и не выполняется в состояниях s_{3k+1} и s_{3k+2} (т.е. p истинно в позициях кратных 3).

---

#### Решение

**a) Если p наступит дважды, то бесконечно часто**

"По крайней мере дважды" = F(p ∧ X F p) — p сейчас или позже, и после этого ещё раз p.
"Бесконечно часто" = G F p

**Формула:** F(p ∧ X F p) → G F p

Или эквивалентно: (F p ∧ F X F p) → G F p

Упрощённо: F(p ∧ X F p) → G F p

---

**б) Между двумя p есть минимум 3 состояния без p**

После p должно быть минимум 3 состояния с ¬p до следующего p.

**Формула:** G(p → X(¬p ∧ X(¬p ∧ X(¬p ∧ X(¬p U p ∨ G ¬p)))))

Или проще: G(p → X X X X p ∨ G ¬p) — после p следующее p не раньше чем через 4 шага.

Более точно: G(p → (X ¬p ∧ X X ¬p ∧ X X X ¬p))

Это требует, чтобы после каждого p следующие 3 состояния не содержали p.

**Формула:** G(p → X(¬p ∧ X(¬p ∧ X ¬p)))

---

**в) p истинно только в позициях, кратных 3**

p в позициях 0, 3, 6, 9, ... (кратные 3)
¬p в позициях 1, 2, 4, 5, 7, 8, ...

Паттерн: p, ¬p, ¬p, p, ¬p, ¬p, p, ...

**Формула:** p ∧ G(p → X(¬p ∧ X(¬p ∧ X p)))

Расшифровка:
- p выполняется в начале (позиция 0)
- Всегда после p: следующее состояние ¬p, затем ¬p, затем p

Это создаёт периодический паттерн с периодом 3.

---

### Задание 6 (10 баллов)
Для структуры Крипке M = (S, S₀, R, AP, L), построенной по системе управления микроволновой печью Redmond RM-1004, где:

S = {s₀, s₁, s₂, s₃, s₄},

S₀ = {s₀},

R = {(s₀, s₃), (s₁, s₀), (s₁, s₂), (s₂, s₄), (s₃, s₀), (s₃, s₄), (s₄, s₁), (s₄, s3), (s₄, s4)},

AP = {p, q, r},

L(s₀) = {q}, L(s₁) = {p, q}, L(s₂) = {p}, L(s₃) = {}, L(s₄) = {p, r}.

Определите, выполняется ли формула CTL EF(p ∧ E(q U r))

---

#### Решение

**Шаг 1: Построение графа структуры Крипке**

```
Состояния и их метки:
┌─────────────────────────────────────────────────────────────────┐
│ s₀: {q}    s₁: {p,q}    s₂: {p}    s₃: {}    s₄: {p,r}         │
└─────────────────────────────────────────────────────────────────┘

Граф переходов:

                    ┌─────────────────────┐
                    │                     │
                    ▼                     │
    ┌─────┐      ┌─────┐              ┌─────┐
    │ s₀  │◄─────│ s₁  │◄─────────────│ s₄  │◄──┐
    │ {q} │      │{p,q}│              │{p,r}│───┘ (петля)
    └─────┘      └─────┘              └─────┘
       │            │                    ▲
       │            │                    │
       ▼            ▼                    │
    ┌─────┐      ┌─────┐                │
    │ s₃  │      │ s₂  │────────────────┘
    │ {} │      │ {p} │
    └─────┘      └─────┘
       │
       ├──────────► s₀ (обратно)
       │
       └──────────► s₄

Список переходов:
  s₀ → s₃
  s₁ → s₀, s₁ → s₂
  s₂ → s₄
  s₃ → s₀, s₃ → s₄
  s₄ → s₁, s₄ → s₃, s₄ → s₄ (петля)
```

**Шаг 2: Таблица атомарных предложений**

| Состояние | p | q | r |
|-----------|---|---|---|
| s₀ | ✗ | ✓ | ✗ |
| s₁ | ✓ | ✓ | ✗ |
| s₂ | ✓ | ✗ | ✗ |
| s₃ | ✗ | ✗ | ✗ |
| s₄ | ✓ | ✗ | ✓ |

**Шаг 3: Вычисление E(q U r)**

E(q U r) = μZ.(r ∨ (q ∧ EX Z))

Требуется: существует путь, на котором q выполняется до тех пор, пока не станет r.

**Итерация 0:** Z₀ = ∅

**Итерация 1:** Z₁ = {s | r ∈ L(s)} = {s₄}

**Итерация 2:** Z₂ = Z₁ ∪ {s | q ∈ L(s) ∧ ∃t: (s,t) ∈ R ∧ t ∈ Z₁}
- s₀: q = 1, переходы в {s₃}. s₃ ∈ Z₁? Нет
- s₁: q = 1, переходы в {s₀, s₂}. s₀ ∈ Z₁? Нет. s₂ ∈ Z₁? Нет
- Z₂ = {s₄}

**Неподвижная точка:** E(q U r) = {s₄}

**Пояснение:** Чтобы E(q U r) выполнялось, нужно либо r сразу (только s₄), либо q сейчас и путь к состоянию с E(q U r). Но из состояний с q (s₀, s₁) нельзя напрямую попасть в s₄:
- s₀ → s₃ (q=0 в s₃, цепочка прерывается)
- s₁ → s₀ или s₂ (оба не в Z₁)

**Шаг 4: Вычисление p ∧ E(q U r)**

| Состояние | p | E(q U r) | p ∧ E(q U r) |
|-----------|---|----------|--------------|
| s₀ | 0 | 0 | 0 |
| s₁ | 1 | 0 | 0 |
| s₂ | 1 | 0 | 0 |
| s₃ | 0 | 0 | 0 |
| s₄ | 1 | 1 | **1** |

**p ∧ E(q U r) выполняется только в s₄**

**Шаг 5: Вычисление EF(p ∧ E(q U r))**

EF φ = μZ.(φ ∨ EX Z)

**Итерация 0:** Z₀ = ∅

**Итерация 1:** Z₁ = {s₄}

**Итерация 2:** Z₂ = Z₁ ∪ {s | ∃t: (s,t) ∈ R ∧ t ∈ Z₁}
- s₀: s₀ → s₃, s₃ ∈ Z₁? Нет
- s₁: s₁ → {s₀, s₂}, ни одно в Z₁? Нет
- s₂: s₂ → s₄, s₄ ∈ Z₁? **Да!** → добавляем s₂
- s₃: s₃ → {s₀, s₄}, s₄ ∈ Z₁? **Да!** → добавляем s₃
- s₄: s₄ → {s₁, s₃, s₄}, s₄ ∈ Z₁? Да (уже там)
- Z₂ = {s₂, s₃, s₄}

**Итерация 3:** Z₃ = Z₂ ∪ {s | ∃t: (s,t) ∈ R ∧ t ∈ Z₂}
- s₀: s₀ → s₃, s₃ ∈ Z₂? **Да!** → добавляем s₀
- s₁: s₁ → {s₀, s₂}, s₂ ∈ Z₂? **Да!** → добавляем s₁
- Z₃ = {s₀, s₁, s₂, s₃, s₄}

**Итерация 4:** Z₄ = Z₃ (неподвижная точка)

**EF(p ∧ E(q U r)) = {s₀, s₁, s₂, s₃, s₄}**

**Шаг 6: Проверка начального состояния**

S₀ = {s₀}, s₀ ∈ EF(p ∧ E(q U r))? **Да!**

**Ответ: M ⊨ EF(p ∧ E(q U r)) — формула выполняется** ✓

**Путь-свидетель:** s₀ → s₃ → s₄

В s₄ выполняется p ∧ E(q U r):
- p = 1 в s₄ ✓
- E(q U r) = 1 в s₄ (r = 1 сразу) ✓