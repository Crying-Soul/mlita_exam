# Вариант Л11

(Σ 70 баллов)

### Задание 1 (10 баллов)
Логическим уравнением называется равенство двух логических функций F1 = F2, один из аргументов которых является логической функцией остальных аргументов, например:

¬((A ∨ B) ∧ ((X ∧ A) ∨ B)) = ¬(B ∨ ¬(X => A)).

Корнем логического уравнения является такое представление аргумента \(X\) как логической функции других аргументов, которое обеспечивает равенство при всех значениях остальных аргументов. Найдите корень указанного выше логического уравнения.

---

#### Решение

**Уравнение:** ¬((A ∨ B) ∧ ((X ∧ A) ∨ B)) = ¬(B ∨ ¬(X → A))

**Шаг 1: Упростим левую часть**

¬((A ∨ B) ∧ ((X ∧ A) ∨ B))

Используем дистрибутивность: (X ∧ A) ∨ B = (X ∨ B) ∧ (A ∨ B)

Левая часть: ¬((A ∨ B) ∧ (X ∨ B) ∧ (A ∨ B)) = ¬((A ∨ B) ∧ (X ∨ B))

**Шаг 2: Упростим правую часть**

¬(B ∨ ¬(X → A))

X → A = ¬X ∨ A

¬(X → A) = ¬(¬X ∨ A) = X ∧ ¬A

B ∨ ¬(X → A) = B ∨ (X ∧ ¬A)

Правая часть: ¬(B ∨ (X ∧ ¬A)) = ¬B ∧ ¬(X ∧ ¬A) = ¬B ∧ (¬X ∨ A)

**Шаг 3: Приравняем**

¬((A ∨ B) ∧ (X ∨ B)) = ¬B ∧ (¬X ∨ A)

Левая: по де Моргану: ¬(A ∨ B) ∨ ¬(X ∨ B) = (¬A ∧ ¬B) ∨ (¬X ∧ ¬B) = ¬B ∧ (¬A ∨ ¬X)

Итак: ¬B ∧ (¬A ∨ ¬X) = ¬B ∧ (¬X ∨ A)

**Шаг 4: Сравниваем**

При ¬B = 1: (¬A ∨ ¬X) = (¬X ∨ A)?

¬A ∨ ¬X = A → ¬X
¬X ∨ A = X → A

Это не тождество! Значит, нужно найти X.

**Шаг 5: Решаем уравнение**

(¬A ∨ ¬X) = (¬X ∨ A)

Это выполняется при любом X, если ¬A = A, т.е. никогда в общем случае.

Но при B = 1: обе части равны 0, условие выполнено.

При B = 0: ¬A ∨ ¬X = ¬X ∨ A

- A = 0: ¬0 ∨ ¬X = ¬X ∨ 0 → 1 = ¬X. Нужно X = 0.
- A = 1: ¬1 ∨ ¬X = ¬X ∨ 1 → ¬X = 1. Нужно X = 0.

**При B = 0:** X = 0 для всех A.

**При B = 1:** любое X работает.

**Корень:** X = ¬B ∧ 0 ∨ B ∧ ? = **X = B** (при B=1 X может быть любым, выбираем X=B=1; при B=0 X=0=B)

Проверим X = B:
- Левая: ¬((A ∨ B) ∧ ((B ∧ A) ∨ B)) = ¬((A ∨ B) ∧ B) = ¬B
- Правая: ¬(B ∨ ¬(B → A)) = ¬(B ∨ (B ∧ ¬A)) = ¬(B) = ¬B ✓

**Ответ:** X = B

---

### Задание 2 (20 баллов)
Пять мужчин {A,B,C,D,E} и пять женщин {f,g,h,i,k} номинируются на две выборные позиции: президента и вице‑президента. В результате голосования выбраны один мужчина и одна женщина. Кто выбран, если известно следующее:

a) Если не выбраны ни A, ни B, то выбрана g.

b) Если не выбраны ни C, ни f, то выбрана i.

c) Если не выбраны ни B, ни g, то выбран C.

d) Если не выбраны ни A, ни f, то выбран i.

e) Если не выбраны ни A, ни f, то выбран g.

(Дайте формальное логическое заключение о выбранных людях.)

---

#### Решение

**Обозначения:** Пусть выбранный мужчина = M ∈ {A,B,C,D,E}, выбранная женщина = W ∈ {f,g,h,i,k}.

**Формализация условий:**

a) (¬A ∧ ¬B) → g (т.е. W = g)
b) (¬C ∧ ¬f) → i (т.е. W = i)
c) (¬B ∧ ¬g) → C (т.е. M = C)
d) (¬A ∧ ¬f) → i
e) (¬A ∧ ¬f) → g

**Анализ условий d) и e):**

Из d) и e): если ¬A ∧ ¬f, то i И g выбраны.
Но выбрана только одна женщина! Значит, ¬A ∧ ¬f невозможно.

Следовательно: A ∨ f (выбран A или выбрана f).

**Случай 1: Выбрана f (W = f)**

Тогда ¬g (g не выбрана).

Из условия a): (¬A ∧ ¬B) → g
Контрапозиция: ¬g → (A ∨ B)
Значит: A ∨ B (выбран A или B).

Из условия c): (¬B ∧ ¬g) → C
При ¬g: ¬B → C
Если ¬B, то M = C.

**Подслучай 1.1: W = f, M = A**
Проверим все условия:
- a) ¬A ∧ ¬B = 0 ∧ ? = 0, импликация истинна ✓
- b) ¬C ∧ ¬f = 1 ∧ 0 = 0, импликация истинна ✓
- c) ¬B ∧ ¬g = ? ∧ 1, если B не выбран (¬B=1): 1 → C, но M=A≠C. Противоречие!

Значит, если M = A, то B тоже должен быть как-то задействован, но выбран только один мужчина.

Проверим c): ¬B ∧ ¬g = 1 ∧ 1 = 1 → C. Нужно M = C. Противоречие с M = A.

**Подслучай 1.2: W = f, M = B**
- a) ¬A ∧ ¬B = 1 ∧ 0 = 0 ✓
- b) ¬C ∧ ¬f = 1 ∧ 0 = 0 ✓
- c) ¬B ∧ ¬g = 0 ∧ 1 = 0 ✓
- d) ¬A ∧ ¬f = 1 ∧ 0 = 0 ✓
- e) ¬A ∧ ¬f = 0 ✓

Все условия выполнены!

**Случай 2: Выбран A (M = A), не f**

Из A ∨ f и M = A: возможно W ≠ f.

Проверим M = A, W = g:
- a) ¬A ∧ ¬B = 0, ✓
- b) ¬C ∧ ¬f = 1 ∧ 1 = 1 → i. Но W = g ≠ i. Противоречие!

Проверим M = A, W = h:
- b) 1 → i, но W = h ≠ i. Противоречие!

**Ответ:** Выбраны **B** (мужчина) и **f** (женщина).

---

### Задание 3 (10 баллов)
Дано, что существуют варёные раки и существуют красные раки, и все красные варёные раки мертвы. Также известно, что все варёные мёртвые раки красны. Следует ли отсюда, что все красные мёртвые раки варёны? Обоснуйте ответ формально.

---

#### Решение

**Обозначения:**
- V(x) — x варёный
- K(x) — x красный
- M(x) — x мёртвый

**Формализация посылок:**

1. ∃x V(x) — существуют варёные раки
2. ∃x K(x) — существуют красные раки
3. ∀x ((K(x) ∧ V(x)) → M(x)) — все красные варёные раки мертвы
4. ∀x ((V(x) ∧ M(x)) → K(x)) — все варёные мёртвые раки красны

**Заключение для проверки:**
∀x ((K(x) ∧ M(x)) → V(x)) — все красные мёртвые раки варёны

**Анализ:**

Построим контрмодель.

Пусть существует рак r такой, что:
- K(r) = 1 (красный)
- M(r) = 1 (мёртвый)
- V(r) = 0 (не варёный)

Проверим посылки:
- Посылка 3 для r: (K(r) ∧ V(r)) → M(r) = (1 ∧ 0) → 1 = 0 → 1 = 1 ✓
- Посылка 4 для r: (V(r) ∧ M(r)) → K(r) = (0 ∧ 1) → 1 = 0 → 1 = 1 ✓

Посылки выполнены для r!

Но заключение для r: (K(r) ∧ M(r)) → V(r) = (1 ∧ 1) → 0 = 1 → 0 = 0 ✗

**Контрмодель:**
- Рак a: варёный, красный, мёртвый (удовлетворяет посылкам 1, 2, 3, 4)
- Рак r: красный, мёртвый, НЕ варёный (контрпример)

Рак r может быть, например, красным от природы и умершим от старости (не от варки).

**Ответ:** **Нет, заключение не следует** из посылок.

Контрпример: красный мёртвый рак, который не был сварен (например, умер от естественных причин).

---

### Задание 4 (5 баллов)
Проверьте корректность ациклической программы при заданных предусловии и постусловии:

{z = 2y + x}  
x := -3y;  
y := y - 2 x z;  
z := x + y;  
{2z < y - x}

---

#### Решение

**Замечание:** Запись "y := y - 2 x z" интерпретируем как y := y - 2*x*z (умножение).

**Метод wp (слабейшего предусловия):**

Постусловие: 2z < y - x

**Шаг 1:** wp("z := x + y", 2z < y - x)

Подставляем x + y вместо z:
2(x + y) < y - x
2x + 2y < y - x
3x + y < 0

**Шаг 2:** wp("y := y - 2xz", 3x + y < 0)

Подставляем y - 2xz вместо y:
3x + (y - 2xz) < 0
3x + y - 2xz < 0

**Шаг 3:** wp("x := -3y", 3x + y - 2xz < 0)

Подставляем -3y вместо x:
3(-3y) + y - 2(-3y)z < 0
-9y + y + 6yz < 0
-8y + 6yz < 0
2y(3z - 4) < 0

**wp программы:** 2y(3z - 4) < 0

**Шаг 4: Проверяем импликацию**

(z = 2y + x) → (2y(3z - 4) < 0)?

Подставим z = 2y + x:
2y(3(2y + x) - 4) < 0
2y(6y + 3x - 4) < 0

Это не следует из z = 2y + x. Нужен контрпример.

**Контрпример:**
y = 1, x = 0, z = 2(1) + 0 = 2

Предусловие: z = 2y + x → 2 = 2 + 0 = 2 ✓

Проверим wp: 2(1)(3(2) - 4) = 2(6 - 4) = 2(2) = 4 < 0? **Нет!**

**Проверка выполнением:**
- x := -3y = -3(1) = -3
- y := y - 2xz = 1 - 2(-3)(2) = 1 + 12 = 13
- z := x + y = -3 + 13 = 10

Постусловие: 2z < y - x → 2(10) < 13 - (-3) → 20 < 16? **Нет!**

**Ответ:** Спецификация **неверна**.

**Контрпример:** x = 0, y = 1, z = 2.

---

### Задание 5 (10 баллов)
Выразите в LTL следующие свойства:

a) Я выйду замуж точно один раз.

b) Я выйду замуж не более одного раза.

c) Я выйду замуж не менее двух раз.

(Используйте стандартные обозначения LTL: X, F, G, U.)

---

#### Решение

Пусть m — атомарное высказывание "выхожу замуж" (событие брака в текущем состоянии).

**a) Точно один раз**

F m ∧ ¬F(m ∧ X F m)

Или эквивалентно:
F m ∧ G(m → X G ¬m)

Расшифровка: когда-нибудь m, и после каждого m больше никогда m.

**Формула:** F m ∧ G(m → X G ¬m)

---

**b) Не более одного раза**

G(m → X G ¬m)

Или: ¬F(m ∧ X F m)

Расшифровка: никогда не бывает так, чтобы m произошло, а потом снова m.

**Формула:** ¬F(m ∧ X F m)

Альтернативно: G(m → X G ¬m)

---

**c) Не менее двух раз**

F(m ∧ X F m)

Расшифровка: когда-нибудь m, и после этого ещё когда-нибудь m.

**Формула:** F(m ∧ X F m)

---

### Задание 6 (15 баллов)
Задана структура Крипке, описывающая граф переходов системы управления микроволновой печью: 

Матрица смежности (порядок вершин: s, d, (d,s), p, (p,s), (d,p,s)):

| from \ to | s | d | (d,s) | p | (p,s) | (d,p,s) |
|---:|:-:|:-:|:-:|:-:|:-:|:-:|
| **s**       | 0 | 1 | 0 | 1 | 1 | 0 |
| **d**       | 0 | 0 | 1 | 0 | 0 | 0 |
| **(d,s)**   | 1 | 0 | 0 | 0 | 1 | 0 |
| **p**       | 0 | 0 | 0 | 0 | 1 | 0 |
| **(p,s)**   | 0 | 0 | 0 | 0 | 0 | 1 |
| **(d,p,s)** | 0 | 0 | 0 | 1 | 1 | 0 |

Здесь обозначены утверждения:
- d — «дверца печи закрыта»,
- p — «СВЧ излучение включено»,
- s — «кнопка 'ПУСК' нажата». 

Требование к системе управления печью: «Всегда, когда СВЧ излучение включено, дверца печи закрыта». 

a) Запишите это требование в виде формулы CTL.

b) Формально проверьте выполнение формулы на заданном графе (обоснуйте, выполняется ли формула в каждом состоянии).

---

#### Решение

**a) Формула CTL**

"Всегда, когда p, то d" = AG(p → d)

**Формула:** AG(p → d)

---

**b) Проверка на графе**

**Шаг 1: Построение графа структуры Крипке**

```
Состояния и их метки:
┌────────────────────────────────────────────────────────────────────┐
│ s:{s}  d:{d}  (d,s):{d,s}  p:{p}  (p,s):{p,s}  (d,p,s):{d,p,s}    │
└────────────────────────────────────────────────────────────────────┘

Граф переходов (по матрице смежности):

           ┌──────────────────────────────────────────┐
           │                                          │
           ▼                                          │
        ┌─────┐        ┌─────┐        ┌──────┐       │
        │  s  │───────►│  d  │───────►│(d,s) │───────┘
        │ {s} │        │ {d} │        │{d,s} │
        └─────┘        └─────┘        └──────┘
           │                             │
           │  ┌──────────────────────────┘
           │  │
           │  │              ┌───────────────────┐
           ▼  ▼              │                   │
        ┌─────┐           ┌──────┐           ┌───────┐
        │  p  │──────────►│(p,s) │──────────►│(d,p,s)│
        │ {p} │           │{p,s} │           │{d,p,s}│
        └─────┘           └──────┘           └───────┘
                             ▲                   │
                             │                   │
                             └───────────────────┘
                            (также (d,p,s) → p)
                            
Полный список переходов:
  s → d, p, (p,s)
  d → (d,s)
  (d,s) → s, (p,s)
  p → (p,s)
  (p,s) → (d,p,s)
  (d,p,s) → p, (p,s)
```

**Шаг 2: Таблица атомарных предложений**

| Состояние | d | p | s | p → d |
|-----------|---|---|---|-------|
| s         | ✗ | ✗ | ✓ | 0→0 = **1** |
| d         | ✓ | ✗ | ✗ | 0→1 = **1** |
| (d,s)     | ✓ | ✗ | ✓ | 0→1 = **1** |
| p         | ✗ | ✓ | ✗ | 1→0 = **0** ⚠️ |
| (p,s)     | ✗ | ✓ | ✓ | 1→0 = **0** ⚠️ |
| (d,p,s)   | ✓ | ✓ | ✓ | 1→1 = **1** |

**Шаг 3: Вычисление AG(p → d)**

AG(p → d) требует, чтобы (p → d) выполнялось во ВСЕХ достижимых состояниях на ВСЕХ путях.

**Критические состояния:** В p и (p,s) формула p → d **ложна**!

Это означает, что AG(p → d) будет ложной в любом состоянии, из которого достижимы p или (p,s).

**Шаг 4: Анализ достижимости**

Проверим, какие состояния достижимы из каждого:

- Из s: s → p (напрямую!) → AG(p → d) ложна в s
- Из d: d → (d,s) → (p,s) → AG(p → d) ложна в d  
- Из (d,s): (d,s) → (p,s) → AG(p → d) ложна в (d,s)
- Из p: уже p → d = 0 → AG(p → d) ложна в p
- Из (p,s): уже p → d = 0 → AG(p → d) ложна в (p,s)
- Из (d,p,s): (d,p,s) → p → AG(p → d) ложна в (d,p,s)

**Вывод: AG(p → d) ложна во ВСЕХ состояниях!**

**Ответ:** 

a) **AG(p → d)**

b) Формула **не выполняется** на данном графе ни в одном состоянии.

**Пояснение:** В состояниях p = {p} и (p,s) = {p, s} СВЧ излучение включено (p = 1), но дверца печи не закрыта (d = 0). Это нарушение требования безопасности — в правильно спроектированной системе управления такие состояния должны быть недостижимы.

