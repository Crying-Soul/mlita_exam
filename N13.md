# Вариант Н13


### Задание 1 (5 баллов)
Сколько всего несамодвойственных двоичных функций от пяти двоичных переменных?

---

#### Решение

Функция f самодвойственна, если f(x₁,...,xₙ) = ¬f(¬x₁,...,¬xₙ).

Для n = 5 переменных:
- Всего наборов: 2⁵ = 32
- Наборы разбиваются на 16 пар противоположных наборов
- Для самодвойственной функции значение на одном наборе пары определяет значение на противоположном
- Число самодвойственных функций: 2¹⁶

Всего функций от 5 переменных: 2³² = 4294967296

Число несамодвойственных функций:
2³² - 2¹⁶ = 4294967296 - 65536 = **4294901760**

---

### Задание 2 (10 баллов)
Путешественник оказался в стране, населённой двумя племенами. Члены первого племени говорят только правду, члены второго — только лгут. Встретив двух аборигенов, путешественник спросил одного, говорят ли они оба правду. Услышав ответ, путешественник понял, что ему недостаточно информации для определения того, к каким племенам относятся аборигены. Тогда он задал собеседнику второй вопрос: «Вы из одного племени?». Получив ответ, путешественник точно определил, к какому племени относится каждый из аборигенов. К какому?

---

#### Решение

**Обозначения:**
- A — первый абориген (отвечает на вопросы)
- B — второй абориген
- Rₐ = 1 если A рыцарь, 0 если лжец
- Rᵦ = 1 если B рыцарь, 0 если лжец

**Вопрос 1: "Вы оба говорите правду?" (т.е. Rₐ ∧ Rᵦ?)**

Ответ A на вопрос Q:
- Если A рыцарь: говорит правду о Q, т.е. Rₐ ∧ Rᵦ
- Если A лжец: лжёт о Q, т.е. ¬(Rₐ ∧ Rᵦ)

| Rₐ | Rᵦ | Ответ A |
|----|----|---------|
| 1  | 1  | Да (правда: оба правду) |
| 1  | 0  | Нет (правда: не оба) |
| 0  | 1  | Да (ложь: не оба, говорит наоборот) |
| 0  | 0  | Да (ложь: не оба, говорит наоборот) |

Если ответ "Да": (1,1), (0,1), (0,0) — 3 варианта, недостаточно информации ✓
Если ответ "Нет": только (1,0) — определено сразу.

Путешественник не определил → ответ был **"Да"**.

**Вопрос 2: "Вы из одного племени?" (т.е. Rₐ = Rᵦ?)**

| Rₐ | Rᵦ | Rₐ = Rᵦ | Ответ A |
|----|----|---------|---------|
| 1  | 1  | Да | Да (правда) |
| 0  | 1  | Нет | Да (ложь) |
| 0  | 0  | Да | Нет (ложь) |

Если ответ "Да": (1,1) или (0,1) — всё ещё неоднозначно.
Если ответ "Нет": только (0,0).

Путешественник определил точно → ответ был **"Нет"**.

**Ответ:** A — лжец, B — лжец. **Оба аборигена из племени лжецов.**

---

### Задание 3 (10 баллов)
Какие из следующих умозаключений правильны?

a) Поскольку ни одна купеля не глюка, а все глюки одноглазы, то некоторые одноглазые не купелят.

б) Поскольку все купеляты не одноглазы и некоторые одноглазые не глюки, то некоторые глюки — купеляты.

---

#### Решение

**Обозначения:**
- K(x) — x купеля (купелят)
- G(x) — x глюка (глюк)
- O(x) — x одноглазый

**a) Ни одна купеля не глюка, все глюки одноглазы ⊢ некоторые одноглазые не купелят**

Посылки:
1. ∀x (K(x) → ¬G(x)) — ни одна купеля не глюка
2. ∀x (G(x) → O(x)) — все глюки одноглазы

Заключение: ∃x (O(x) ∧ ¬K(x)) — некоторые одноглазые не купелят

**Анализ:**

Из посылки 2: существуют глюки (иначе посылка тривиальна). Если G непусто:
- Пусть a — глюк, тогда G(a) = 1
- Из посылки 2: O(a) = 1 (a одноглазый)
- Из посылки 1: K(a) → ¬G(a), контрапозиция: G(a) → ¬K(a). Значит ¬K(a) = 1.
- Итого: O(a) ∧ ¬K(a) = 1

Заключение выполняется. **Умозаключение правильно** (при условии, что множество глюков непусто).

**Примечание:** В классической силлогистике посылка "все глюки одноглазы" предполагает существование глюков.

---

**б) Все купеляты не одноглазы, некоторые одноглазые не глюки ⊢ некоторые глюки — купеляты**

Посылки:
1. ∀x (K(x) → ¬O(x)) — все купеляты не одноглазы
2. ∃x (O(x) ∧ ¬G(x)) — некоторые одноглазые не глюки

Заключение: ∃x (G(x) ∧ K(x)) — некоторые глюки — купеляты

**Контрмодель:**

Пусть:
- K = {k} — единственный купелят
- G = {} — глюков нет
- O = {o} — единственный одноглазый, o ≠ k

Проверка посылок:
1. K(k) → ¬O(k): k не одноглазый. ✓
2. O(o) ∧ ¬G(o): o одноглазый и не глюк. ✓

Проверка заключения: ∃x (G(x) ∧ K(x)) — нет таких x, т.к. G = ∅.

**Умозаключение неправильно.**

**Ответ:**
- a) **Правильно** ✓
- б) **Неправильно** ✗

---

### Задание 4 (20 баллов)
Проверьте корректность программы методом Флойда:

{ x ≥ 0 }
begin
    f := 1;
    while x ≠ 0 do
        f := f * x;
        x := x - 1;
end
{ f = x! }


---

#### Решение

**Анализ программы:**

```
f := 1;
while x ≠ 0 do
    f := f * x;
    x := x - 1;
end
```

**Проблема с постусловием:**

После цикла x = 0, а постусловие требует f = x! = 0! = 1.

Но программа вычисляет факториал начального значения x, а не конечного!

**Пример: x₀ = 3**

- f = 1, x = 3
- Итерация 1: f = 1 * 3 = 3, x = 2
- Итерация 2: f = 3 * 2 = 6, x = 1
- Итерация 3: f = 6 * 1 = 6, x = 0
- Результат: f = 6, x = 0

Постусловие: f = x! → 6 = 0! = 1? **Нет!**

**Корректное постусловие:** f = x₀!, где x₀ — начальное значение x.

Или нужно сохранить начальное значение: `n := x; ... { f = n! }`

**Если рассматривать правильную спецификацию { x ≥ 0 } ... { f = x₀! }:**

**Инвариант цикла:** I ≡ (f * x! = x₀!) ∧ (x ≥ 0)

**Проверка:**

1. Перед циклом: f = 1, x = x₀.
   f * x! = 1 * x₀! = x₀! ✓

2. Сохранение инварианта при x ≠ 0:
   - f' = f * x
   - x' = x - 1
   - f' * x'! = (f * x) * (x-1)! = f * x * (x-1)! = f * x! = x₀! ✓

3. После цикла (x = 0): f * 0! = x₀! → f = x₀! ✓

4. Завершаемость: вариант V = x, убывает на 1, x ≥ 0 ✓

**Ответ:** Спецификация **неверна** из-за ошибки в постусловии.

**Контрпример:** x₀ = 3 → f = 6, x = 0, но 6 ≠ 0! = 1.

Корректное постусловие должно быть: f = n!, где n — начальное значение x.

---

### Задание 5 (10 баллов)
Выразите в LTL следующие свойства:

a) Сейчас я живу, но когда-нибудь умру.

b) Событие p на вычислении может наступить только конечное число раз.

c) Переменная enabled на вычислении системы будет истинной бесконечное число раз.

d) Документ не действителен до тех пор, пока не подписан.

---

#### Решение

**a) Сейчас я живу, но когда-нибудь умру**

Пусть alive — "жив", dead — "мёртв".

**Формула:** alive ∧ F dead

Или если dead = ¬alive: alive ∧ F ¬alive

---

**b) Событие p может наступить только конечное число раз**

Конечное число раз = когда-нибудь p перестанет происходить навсегда.

**Формула:** F G ¬p

Расшифровка: когда-нибудь наступит момент, после которого p не будет выполняться никогда.

---

**c) Переменная enabled истинна бесконечное число раз**

**Формула:** G F enabled

Расшифровка: всегда в будущем будет enabled, т.е. enabled повторяется бесконечно.

---

**d) Документ не действителен до тех пор, пока не подписан**

Пусть valid — "документ действителен", signed — "документ подписан".

**Формула:** ¬valid U signed

Расшифровка: документ недействителен (¬valid) до момента подписания (signed).

Или, если требуется, чтобы после подписания был действителен:
**¬valid U (signed ∧ X G valid)**

Упрощённо: **¬valid U signed**

---

### Задание 6 (15 баллов)
Задана структура Крипке, описывающая граф переходов системы управления микроволновой печью:  

(см. файл с другими вариантами — используется тот же граф переходов и пометки p, d, s)

Требование к системе управления печью: «Существует такая траектория поведения системы, на которой СВЧ излучение не выключается никогда».

a) Запишите это требование в виде формулы CTL (предположите, что p — «СВЧ излучение включено»).

b) Формально проверьте выполнение формулы на заданном графе (обоснуйте, выполняется ли формула в каком-либо состоянии).

---

#### Решение

**a) Формула CTL**

"Существует траектория, на которой p всегда" = EG p

**Формула:** EG p

---

**b) Проверка на графе**

Используем граф из предыдущих вариантов:

**Состояния и метки p:**
- s: p = 0
- d: p = 0
- (d,s): p = 0
- p: p = 1
- (p,s): p = 1
- (d,p,s): p = 1

**Переходы:**
- s → d, p, (p,s)
- d → (d,s)
- (d,s) → s, (p,s)
- p → (p,s)
- (p,s) → (d,p,s)
- (d,p,s) → p, (p,s)

**Вычисление EG p:**

EG p = νZ.(p ∧ EX Z) — наибольшая неподвижная точка.

**Итерация 0:** Z₀ = S (все состояния)

**Итерация 1:** Z₁ = {s | p(s) = 1 ∧ EX Z₀}
- p: p = 1, переход в (p,s) ∈ Z₀ ✓
- (p,s): p = 1, переход в (d,p,s) ∈ Z₀ ✓
- (d,p,s): p = 1, переходы в p, (p,s) ∈ Z₀ ✓
- Z₁ = {p, (p,s), (d,p,s)}

**Итерация 2:** Z₂ = {s | p(s) = 1 ∧ EX Z₁}
- p: переход в (p,s) ∈ Z₁ ✓
- (p,s): переход в (d,p,s) ∈ Z₁ ✓
- (d,p,s): переходы в p, (p,s), оба ∈ Z₁ ✓
- Z₂ = {p, (p,s), (d,p,s)} = Z₁

Неподвижная точка достигнута: **EG p = {p, (p,s), (d,p,s)}**

**Проверка начального состояния:**

Начальное состояние s ∉ EG p.

Но формула спрашивает, существует ли такая траектория вообще. Если система может попасть в состояние с EG p, то формула интересна для того состояния.

**Ответ:**

a) **EG p**

b) Формула **выполняется** в состояниях p, (p,s), (d,p,s).

Существует бесконечная траектория: p → (p,s) → (d,p,s) → p → (p,s) → ... на которой p выполняется всегда.

Если начальное состояние s, то EG p в s не выполняется (нужно сначала попасть в p).