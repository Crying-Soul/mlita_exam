# Вариант Р16

### Задание 1 (10 баллов)
Путешественник оказался в стране, населенной двумя племенами. Члены первого племени говорят только правду, члены второго только лгут. Встретив двух аборигенов, путешественник спросил одного, говорит ли он правду: “Халла-балла” отвечал абориген. Второй пояснил: “Он сказал ‘да’, но он ужасный лжец”. Может ли путешественник задать дополнительный вопрос кому-нибудь из них, чтобы определить, к какому племени принадлежит каждый из встреченных им аборигенов? Какому? Какой вопрос?

**Решение:**
1.  **Анализ ответов:**
    *   Первый абориген ($A$) ответил «Халла-балла». На вопрос «Вы говорите правду?» (или «Вы рыцарь?») и Рыцарь (говорит правду), и Лжец (лжет) всегда отвечают **«Да»**. Следовательно, «Халла-балла» означает «Да».
    *   Второй абориген ($B$) сказал: «Он сказал "да", но он ужасный лжец».
        Это сложное высказывание: $S_B = (\text{A сказал "да"}) \land (\text{A — лжец})$.
        Мы знаем, что факт $(\text{A сказал "да"})$ — истина.

2.  **Разбор случаев для $B$:**
    *   **Случай 1:** $B$ — Рыцарь.
        Тогда его высказывание $S_B$ истинно.
        Значит, оба конъюнкта истинны: $(\text{A сказал "да"})$ и $(\text{A — лжец})$.
        Результат: **$A$ — Лжец, $B$ — Рыцарь**.
    *   **Случай 2:** $B$ — Лжец.
        Тогда его высказывание $S_B$ ложно.
        Так как $(\text{A сказал "да"})$ истинно, то для ложности конъюнкции $Tr \land P$ должно быть ложно $P$.
        То есть утверждение $(\text{A — лжец})$ ложно. Значит, $A$ — Рыцарь.
        Результат: **$A$ — Рыцарь, $B$ — Лжец**.

3.  **Итог анализа:**
    Мы точно знаем, что $A$ и $B$ принадлежат к **разным** племенам (один Рыцарь, один Лжец), но не знаем, кто есть кто.

4.  **Дополнительный вопрос:**
    Чтобы выяснить, кто из них кто, нужно задать вопрос, на который они дадут *разные* ответы (или такой, который отличит Рыцаря от Лжеца, зная, что они разные).
    *   **Вопрос любому (например, A):** «Вы из одного племени?»
        *   Ситуация 1 ($A$ — Лжец, $B$ — Рыцарь): Они разные. Истина — "Нет". Лжец ответит **"Да"**.
        *   Ситуация 2 ($A$ — Рыцарь, $B$ — Лжец): Они разные. Истина — "Нет". Рыцарь ответит **"Нет"**.
    *   **Интерпретация:**
        *   Ответ "Да" $\implies A$ — Лжец (значит $B$ — Рыцарь).
        *   Ответ "Нет" $\implies A$ — Рыцарь (значит $B$ — Лжец).

**Ответ:** Да, может. Например, спросить у первого: **«Вы с твоим спутником из одного племени?»**.

---

### Задание 2 (10 баллов)
На множестве всех животных определите предикаты, выражающие следующие утверждения:
a) Только жирафы выше 5 метров.
b) В Африке не бывает животных, которые бы не были выше 5 метров.
c) В этом зоопарке все животные — жирафы.
d) Все животные и жирафы — африканские животные.
e) Все африканские жирафы из этого зоопарка выше 5 метров.

**Решение:**
Введем предикаты:
*   $G(x)$ — $x$ является жирафом.
*   $T(x)$ — $x$ выше 5 метров (Tall).
*   $A(x)$ — $x$ живет в Африке / африканское животное.
*   $Z(x)$ — $x$ находится в этом зоопарке.

**Формулы:**
a) **Только жирафы выше 5 метров.**
   Это означает: «Если кто-то выше 5 метров, то это обязательно жираф».
   $$ \forall x (T(x) \to G(x)) $$
   *(Иногда трактуется как эквивалентность $\leftrightarrow$, но базовое значение "Only A are B" $\equiv$ "All B are A")*

b) **В Африке не бывает животных, которые бы не были выше 5 метров.**
   $$ \neg \exists x (A(x) \land \neg T(x)) \quad \text{или} \quad \forall x (A(x) \to T(x)) $$

c) **В этом зоопарке все животные — жирафы.**
   $$ \forall x (Z(x) \to G(x)) $$

d) **Все животные и жирафы — африканские животные.**
   (Фраза может быть понята как "Все жирафы являются африканскими", т.к. жирафы — подмножество животных).
   $$ \forall x (G(x) \to A(x)) $$

e) **Все африканские жирафы из этого зоопарка выше 5 метров.**
   $$ \forall x ( (G(x) \land A(x) \land Z(x)) \to T(x) ) $$

---

### Задание 3 (20 баллов)
(Сейф SafePlace)

**a) Функции системы отображения**

Пусть $S$ — состоние автомата, $Buffer$ — введенные символы.
Дисплей $D$ (2 символа) показывает:
*   Если сейф закрыт и нет ввода: **"CL"**.
*   Если сейф открыт (или успешно открылся): **"OP"**.
*   При вводе цифр: отображает последние нажатые цифры (или количество).
*   При ошибке: **"Er"**.

**b) Автомат системы управления**

**Входы:** $\Sigma = \{0..9, *, \#\}$. (* = LOCK, # = CLEAR).
**Состояния:**
*   `Locked` (Исходное, дверь заперта, ждет кода)
*   `Locked_Entry` (Ввод кода для открытия, буфер накапливается)
*   `Open` (Дверь открыта, ждет нового кода)
*   `Open_Entry` (Ввод нового кода для закрытия)
*   `Alert` (Блокировка после 3 ошибок)

**Переменные:**
*   `saved_code` (2 цифры)
*   `current_input` (буфер)
*   `error_count` (счетчик ошибок)

**Граф переходов (Mermaid):**

```mermaid
stateDiagram-v2
    [*] --> Locked
    note right of Locked: Display: CL

    Locked --> Locked_Entry: Digit (0-9)
    note right of Locked_Entry: Display: Input Digits

    state Locked_Entry {
        [*] --> L1
        L1 --> L2: Digit
        L1 --> Locked: # (Clear)
        L2 --> Check: (Auto check after 2 digits)
    }
    
    Locked_Entry --> Open: Check OK (Code == saved_code)
    Locked_Entry --> Locked: Check Fail (Code != saved_code)
         note right of Locked: If Fail: Show Er, error_count++ 
    
    Locked --> Alert: 3 Errors
    Alert --> Locked: Timeout (15-30 min)

    Open --> Open_Entry: Digit (0-9)
    
    state Open_Entry {
        [*] --> O1
        O1 --> O2: Digit
        O2 --> O2: Digit (overwrite?) or Stick
        O1 --> Open: # (Clear)
    }

    Open_Entry --> Locked: * (LOCK button)
        note right of Open_Entry: Save new code only if 2 digits entered
    
    Open --> Locked: * (LOCK) - (Optional re-lock with old code?)
```

**Формальное описание цикла работы:**
1.  **Закрытие (из Open):** Пользователь закрывает дверь (механически), вводит 2 цифры ($d_1 d_2$), нажимает * (LOCK).
    *   Автомат запоминает `saved_code` = $d_1 d_2$.
    *   Переходит в `Locked`. Дисплей: "CL".
2.  **Открытие (из Locked):** Пользователь вводит 2 цифры ($u_1 u_2$).
    *   Если $u_1 u_2 == \text{saved\_code}$: Дисплей "OP", переход в `Open`. Сброс `error_count`.
    *   Иначе: Дисплей "Er", `error_count` + 1. Если `error_count` < 3, возврат в `Locked`. Иначе `Alert`.
3.  **Сброс (#):** В любом режиме ввода очищает текущий буфер.

---

### Задание 4 (5 баллов)
**Задача о сдвиге координат.**
Дано преобразование координат: $x' = x+1, y' = y-2$.
Найти уравнение кардиоиды $(x^2 + y^2 - ax)^2 = a^2(x^2 + y^2)$ в новой системе координат.

**Решение:**
1.  Выразим старые координаты $(x, y)$ через новые $(x', y')$:
    $$ \begin{cases} x' = x + 1 \\ y' = y - 2 \end{cases} \implies \begin{cases} x = x' - 1 \\ y = y' + 2 \end{cases} $$
2.  Подставим полученные выражения в исходное уравнение кривой:
    $$ ((x'-1)^2 + (y'+2)^2 - a(x'-1))^2 = a^2((x'-1)^2 + (y'+2)^2) $$

**Ответ:** Уравнение в новой системе координат: $((x'-1)^2 + (y'+2)^2 - a(x'-1))^2 = a^2((x'-1)^2 + (y'+2)^2)$.

---

### Задание 5 (15 баллов)
**LTL: Следствие.**
Доказать или опровергнуть импликацию: $p \,\mathcal{U}\, \mathcal{G} p \implies \mathcal{F} \mathcal{G} p$.

**Решение:**
Утверждение **верно**.

**Доказательство:**
1.  **Посылка:** $\pi \models p \,\mathcal{U}\, \mathcal{G} p$.
    Это означает: $\exists j \ge 0$, такой что $(\pi^j \models \mathcal{G} p) \land (\forall k < j, \pi^k \models p)$.
2.  **Следствие:** $\mathcal{F} \mathcal{G} p$.
    Это означает: $\exists t \ge 0$, такой что $\pi^t \models \mathcal{G} p$.
3.  **Логический вывод:**
    Из существования индекс $j$, для которого верно $\mathcal{G} p$ (из посылки), автоматически следует существование индекса $t=j$, для которого верно $\mathcal{G} p$ (в следствии).
    Импликация $(A \,\mathcal{U}\, B) \implies \mathcal{F} B$ является общезначимой (чтобы $B$ выполнилось после $A$, оно обязано хотя бы раз наступить). В данном случае $B = \mathcal{G} p$.

**Ответ:** Импликация истинна.

---

### Задание 6 (10 баллов)
**CTL: Проверка модели.**
Проверить истинность формулы $EG F off$ на заданной структуре Крипке.

**Структура (из контекста задачи):**
*   $S = \{on, off\}$
*   $R = \{(on, on), (on, off), (off, on), (off, off)\}$
*   $s_0 = on$

**Решение:**
Нужно проверить $s_0 \models EG (F off)$.
Это означает: существует ли такой путь $\pi$ из $s_0$, что для любого состояния на этом пути $s_i$ выполняется $F off$ ("рано или поздно будет off").

Рассмотрим путь $\pi = on \to off \to off \to off \dots$ (переход в off и удержание).
Этот путь существует в структуре.
Проверим свойство $G (F off)$ на этом пути:
1.  В состоянии $s_0 = on$: $F off$ истинно? Да, так как следующий шаг ведет в $off$.
2.  В состоянии $s_1 = off$: $F off$ истинно? Да, состояние уже $off$.
3.  В последующих $s_k = off$: $F off$ истинно.

Так как для всех состояний пути $\pi$ условие $F off$ выполнено, то $EG (F off)$ истинно.

**Ответ:** Формула выполняется.